<div class="settings-section">
  <h3 class="settings-section-title">üé§ Speech-to-Text (STT)</h3>
  <p class="settings-hint">–†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ –≥–æ–ª–æ—Å–∞ –¥–ª—è –≤–≤–æ–¥–∞ —Ç–µ–∫—Å—Ç–∞.</p>

  <div class="provider-grid provider-grid--small">
    <button class="provider-card" [class.active]="sttProvider() === 'browser'"
      (click)="sttProviderChange.emit('browser')" style="--prov-color:#6366f1">
      <span class="provider-card-icon">üåê</span>
      <span class="provider-card-name">–ë—Ä–∞—É–∑–µ—Ä</span>
    </button>
    <button class="provider-card" [class.active]="sttProvider() === 'openai'" (click)="sttProviderChange.emit('openai')"
      style="--prov-color:#10a37f">
      <span class="provider-card-icon">‚óâ</span>
      <span class="provider-card-name">OpenAI Whisper</span>
    </button>
    <button class="provider-card" [class.active]="sttProvider() === 'groq'" (click)="sttProviderChange.emit('groq')"
      style="--prov-color:#f97316">
      <span class="provider-card-icon">‚ö°</span>
      <span class="provider-card-name">Groq Whisper</span>
    </button>
  </div>

  @if (sttProvider() === 'browser') {
  <div class="provider-config">
    <p class="provider-config-desc">–í—Å—Ç—Ä–æ–µ–Ω–Ω–æ–µ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ Web Speech API. –†–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ API –∫–ª—é—á–∞, –Ω–æ –∫–∞—á–µ—Å—Ç–≤–æ
      –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –±—Ä–∞—É–∑–µ—Ä–∞.</p>
    <div class="form-group">
      <label class="form-label">–Ø–∑—ã–∫</label>
      <select class="form-select" [ngModel]="sttLanguage()" (ngModelChange)="sttLanguageChange.emit($event)">
        <option value="ru-RU">–†—É—Å—Å–∫–∏–π</option>
        <option value="en-US">English</option>
        <option value="de-DE">Deutsch</option>
        <option value="fr-FR">Fran√ßais</option>
        <option value="es-ES">Espa√±ol</option>
        <option value="zh-CN">‰∏≠Êñá</option>
        <option value="ja-JP">Êó•Êú¨Ë™û</option>
      </select>
    </div>
  </div>
  }

  @if (sttProvider() === 'openai') {
  <div class="provider-config">
    <div class="provider-config-link">üîë <a href="https://platform.openai.com/api-keys" target="_blank">–ü–æ–ª—É—á–∏—Ç—å API
        –∫–ª—é—á ‚Üí OpenAI Platform</a></div>
    <div class="form-group">
      <label class="form-label">API Key</label>
      <input type="password" class="form-input" [ngModel]="sttApiKey()" (ngModelChange)="sttApiKeyChange.emit($event)"
        placeholder="OpenAI API key">
    </div>
    <div class="form-group">
      <label class="form-label">–ú–æ–¥–µ–ª—å</label>
      <select class="form-select" [ngModel]="sttModel()" (ngModelChange)="sttModelChange.emit($event)">
        <option value="whisper-1">whisper-1</option>
      </select>
    </div>
    <div class="form-group">
      <label class="form-label">Base URL</label>
      <input type="text" class="form-input" [ngModel]="sttBaseUrl()" (ngModelChange)="sttBaseUrlChange.emit($event)"
        placeholder="https://api.openai.com/v1">
    </div>
  </div>
  }

  @if (sttProvider() === 'groq') {
  <div class="provider-config">
    <div class="provider-config-link">üîë <a href="https://console.groq.com/keys" target="_blank">–ü–æ–ª—É—á–∏—Ç—å API –∫–ª—é—á ‚Üí
        Groq Console</a></div>
    <p class="provider-config-desc">–ë—ã—Å—Ç—Ä–æ–µ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ Groq (–±–µ—Å–ø–ª–∞—Ç–Ω–æ).</p>
    <div class="form-group">
      <label class="form-label">API Key</label>
      <input type="password" class="form-input" [ngModel]="sttApiKey()" (ngModelChange)="sttApiKeyChange.emit($event)"
        placeholder="Groq API key">
    </div>
    <div class="form-group">
      <label class="form-label">–ú–æ–¥–µ–ª—å</label>
      <select class="form-select" [ngModel]="sttModel()" (ngModelChange)="sttModelChange.emit($event)">
        <option value="whisper-large-v3-turbo">whisper-large-v3-turbo</option>
        <option value="whisper-large-v3">whisper-large-v3</option>
      </select>
    </div>
    <div class="form-group">
      <label class="form-label">Base URL</label>
      <input type="text" class="form-input" [ngModel]="sttBaseUrl()" (ngModelChange)="sttBaseUrlChange.emit($event)"
        placeholder="https://api.groq.com/openai/v1">
    </div>
  </div>
  }

  <h3 class="settings-section-title" style="margin-top:32px;">üîä Text-to-Speech (TTS)</h3>
  <p class="settings-hint">–û–∑–≤—É—á–∏–≤–∞–Ω–∏–µ –æ—Ç–≤–µ—Ç–æ–≤ –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞.</p>

  <div class="provider-grid provider-grid--small">
    <button class="provider-card" [class.active]="ttsProvider() === 'browser'"
      (click)="ttsProviderChange.emit('browser')" style="--prov-color:#6366f1">
      <span class="provider-card-icon">üåê</span>
      <span class="provider-card-name">–ë—Ä–∞—É–∑–µ—Ä</span>
    </button>
    <button class="provider-card" [class.active]="ttsProvider() === 'openai'" (click)="ttsProviderChange.emit('openai')"
      style="--prov-color:#10a37f">
      <span class="provider-card-icon">‚óâ</span>
      <span class="provider-card-name">OpenAI TTS</span>
    </button>
    <button class="provider-card" [class.active]="ttsProvider() === 'elevenlabs'"
      (click)="ttsProviderChange.emit('elevenlabs')" style="--prov-color:#e11d48">
      <span class="provider-card-icon">üéµ</span>
      <span class="provider-card-name">ElevenLabs</span>
    </button>
  </div>

  @if (ttsProvider() === 'browser') {
  <div class="provider-config">
    <p class="provider-config-desc">–ë—Ä–∞—É–∑–µ—Ä–Ω—ã–π —Å–∏–Ω—Ç–µ–∑ —Ä–µ—á–∏. –ë–µ—Å–ø–ª–∞—Ç–Ω–æ, –±–µ–∑ API –∫–ª—é—á–µ–π.</p>
    <div class="form-group">
      <label class="form-label">–°–∫–æ—Ä–æ—Å—Ç—å</label>
      <input type="range" min="0.5" max="2" step="0.1" [ngModel]="ttsRate()"
        (ngModelChange)="ttsRateChange.emit($event)" class="form-range">
      <span class="range-value">{{ ttsRate() }}x</span>
    </div>
  </div>
  }

  @if (ttsProvider() === 'openai') {
  <div class="provider-config">
    <div class="provider-config-link">üîë <a href="https://platform.openai.com/api-keys" target="_blank">OpenAI
        Platform</a></div>
    <div class="form-group">
      <label class="form-label">API Key</label>
      <input type="password" class="form-input" [ngModel]="ttsApiKey()" (ngModelChange)="ttsApiKeyChange.emit($event)"
        placeholder="OpenAI API key">
    </div>
    <div class="form-group">
      <label class="form-label">–ú–æ–¥–µ–ª—å</label>
      <select class="form-select" [ngModel]="ttsModel()" (ngModelChange)="ttsModelChange.emit($event)">
        <option value="tts-1">tts-1 (–±—ã—Å—Ç—Ä–æ)</option>
        <option value="tts-1-hd">tts-1-hd (–∫–∞—á–µ—Å—Ç–≤–æ)</option>
        <option value="gpt-4o-mini-tts">gpt-4o-mini-tts (–Ω–æ–≤–∞—è)</option>
      </select>
    </div>
    <div class="form-group">
      <label class="form-label">–ì–æ–ª–æ—Å</label>
      <select class="form-select" [ngModel]="ttsVoice()" (ngModelChange)="ttsVoiceChange.emit($event)">
        <option value="alloy">Alloy</option>
        <option value="echo">Echo</option>
        <option value="fable">Fable</option>
        <option value="onyx">Onyx</option>
        <option value="nova">Nova</option>
        <option value="shimmer">Shimmer</option>
        <option value="ash">Ash</option>
        <option value="coral">Coral</option>
        <option value="sage">Sage</option>
      </select>
    </div>
    <div class="form-group">
      <label class="form-label">Base URL</label>
      <input type="text" class="form-input" [ngModel]="ttsBaseUrl()" (ngModelChange)="ttsBaseUrlChange.emit($event)"
        placeholder="https://api.openai.com/v1">
    </div>
  </div>
  }

  @if (ttsProvider() === 'elevenlabs') {
  <div class="provider-config">
    <div class="provider-config-link">üîë <a href="https://elevenlabs.io/app/settings/api-keys"
        target="_blank">ElevenLabs API Keys</a></div>
    <p class="provider-config-desc">–í—ã—Å–æ–∫–æ–∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–π —Å–∏–Ω—Ç–µ–∑ —Ä–µ—á–∏ —Å —Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω—ã–º–∏ –≥–æ–ª–æ—Å–∞–º–∏.</p>
    <div class="form-group">
      <label class="form-label">API Key</label>
      <input type="password" class="form-input" [ngModel]="ttsApiKey()" (ngModelChange)="ttsApiKeyChange.emit($event)"
        placeholder="ElevenLabs API key">
    </div>
    <div class="form-group">
      <label class="form-label">Voice ID</label>
      <input type="text" class="form-input" [ngModel]="ttsVoice()" (ngModelChange)="ttsVoiceChange.emit($event)"
        placeholder="Voice ID –∏–∑ ElevenLabs">
    </div>
  </div>
  }
</div>